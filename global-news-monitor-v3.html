<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global News Monitor</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e14;
            --bg-secondary: #151922;
            --bg-panel: #1a1f2b;
            --border-color: #2a3342;
            --border-active: #00d9ff;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --text-muted: #6e7681;
            --region-europe: #4da6ff;
            --region-mena: #ff9500;
            --region-asia: #ff3b30;
            --region-africa: #30d158;
            --region-latam: #bf5af2;
            --region-namerica: #ffd60a;
            --unmute-indicator: #00d9ff;
            --error-bg: #3a1f1f;
            --error-border: #ff4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'IBM Plex Sans', -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 2px solid var(--border-color);
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-content {
            max-width: 2400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: -0.02em;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo::before {
            content: '‚óè';
            color: #ff3b30;
            font-size: 1.2rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        .status {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            display: flex;
            gap: 1.5rem;
            align-items: center;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .status-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--unmute-indicator);
        }

        /* Main Grid */
        .container {
            max-width: 2400px;
            margin: 0 auto;
            padding: 1.5rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 1800px) {
            .grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 1200px) {
            .grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .grid {
                grid-template-columns: 1fr;
            }
        }

        /* Panel */
        .panel {
            background: var(--bg-panel);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
            position: relative;
            transition: all 0.2s ease;
        }

        .panel.active {
            border-color: var(--border-active);
            box-shadow: 0 0 0 1px var(--border-active), 0 8px 24px rgba(0, 217, 255, 0.15);
        }

        .panel.error {
            background: var(--error-bg);
            border-color: var(--error-border);
        }

        .panel-header {
            padding: 0.75rem;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            user-select: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s ease;
        }

        .panel:hover .panel-header {
            background: #1e242f;
        }

        .panel.active .panel-header {
            background: rgba(0, 217, 255, 0.1);
        }

        .panel-title {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .channel-name {
            font-weight: 600;
            font-size: 0.875rem;
            letter-spacing: -0.01em;
        }

        .channel-meta {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.65rem;
            color: var(--text-muted);
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .region-tag {
            padding: 0.125rem 0.375rem;
            border-radius: 2px;
            font-size: 0.6rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .region-europe { background: var(--region-europe); color: #000; }
        .region-mena { background: var(--region-mena); color: #000; }
        .region-asia { background: var(--region-asia); color: #fff; }
        .region-africa { background: var(--region-africa); color: #000; }
        .region-latam { background: var(--region-latam); color: #fff; }
        .region-namerica { background: var(--region-namerica); color: #000; }

        .controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .control-btn {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 1rem;
        }

        .control-btn:hover {
            color: var(--text-primary);
            transform: scale(1.1);
        }

        .unmute-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--unmute-indicator);
            display: none;
            animation: glow 1.5s ease-in-out infinite;
        }

        .panel.active .unmute-indicator {
            display: block;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 4px var(--unmute-indicator); }
            50% { box-shadow: 0 0 8px var(--unmute-indicator), 0 0 12px var(--unmute-indicator); }
        }

        /* Video Container */
        .video-container {
            position: relative;
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            background: #000;
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Error State */
        .error-message {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            padding: 1.5rem;
            text-align: center;
            background: var(--error-bg);
        }

        .error-icon {
            font-size: 2rem;
            opacity: 0.5;
        }

        .error-text {
            font-size: 0.813rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }

        .fallback-links {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            width: 100%;
        }

        .fallback-link {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            color: var(--text-primary);
            text-decoration: none;
            font-size: 0.75rem;
            transition: all 0.2s ease;
        }

        .fallback-link:hover {
            background: var(--bg-panel);
            border-color: var(--border-active);
            color: var(--border-active);
        }

        .link-icon {
            font-size: 0.875rem;
        }

        /* Fullscreen button */
        .fullscreen-btn {
            position: absolute;
            bottom: 0.5rem;
            right: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            padding: 0.375rem 0.5rem;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.75rem;
            z-index: 10;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .fullscreen-btn:hover {
            background: rgba(0, 0, 0, 0.9);
            border-color: rgba(255, 255, 255, 0.4);
        }

        /* Legend */
        .legend {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            padding: 1rem 1.5rem;
            margin-top: 2rem;
        }

        .legend-title {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
        }

        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.813rem;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 2px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-muted);
            font-size: 0.75rem;
            font-family: 'JetBrains Mono', monospace;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">GLOBAL NEWS MONITOR</div>
            <div class="status">
                <div class="status-item">
                    <span class="status-dot"></span>
                    <span id="sourceCount">25 SOURCES</span>
                </div>
                <div class="status-item">
                    <span id="activeChannel">‚Äî</span>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="grid" id="newsGrid"></div>

        <div class="legend">
            <div class="legend-title">Regional Coverage</div>
            <div class="legend-items">
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--region-europe)"></div>
                    <span>Europe</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--region-mena)"></div>
                    <span>Middle East & North Africa</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--region-asia)"></div>
                    <span>Asia-Pacific</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--region-africa)"></div>
                    <span>Sub-Saharan Africa</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--region-latam)"></div>
                    <span>Latin America</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--region-namerica)"></div>
                    <span>North America</span>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        Global News Monitor ‚Äî Real-time coverage from 25 sources across 6 continents
    </footer>

    <script>
        const newsSources = [
            // EUROPE
            { 
                name: 'BFM TV', 
                country: 'France', 
                language: 'French', 
                region: 'europe', 
                channelId: 'UCqgynP-0NsNT3e56DQDL5ww',
                youtubeUrl: 'https://www.youtube.com/@BFMTV/live',
                websiteUrl: 'https://www.bfmtv.com/en-direct/'
            },
            { 
                name: 'DW Deutsch', 
                country: 'Germany', 
                language: 'German', 
                region: 'europe', 
                channelId: 'UCQ0QHCIbAzIw1WvShjAJPeQ',
                youtubeUrl: 'https://www.youtube.com/@DeutscheWelle/live',
                websiteUrl: 'https://www.dw.com/de/media-center/live-tv/s-100825'
            },
            { 
                name: 'Sky TG24', 
                country: 'Italy', 
                language: 'Italian', 
                region: 'europe', 
                channelId: 'UCd6qGwhB_tOYRQUIU__I2hQ',
                youtubeUrl: 'https://www.youtube.com/@SkyTG24/live',
                websiteUrl: 'https://tg24.sky.it/diretta'
            },
            { 
                name: 'RTVE 24h', 
                country: 'Spain', 
                language: 'Spanish', 
                region: 'europe', 
                channelId: 'UC7QZIf0dta-XPXsp9Hv4dTw',
                youtubeUrl: 'https://www.youtube.com/@RTVE/live',
                websiteUrl: 'https://www.rtve.es/play/videos/directo/canales-lineales/24h/'
            },
            { 
                name: 'ERT News', 
                country: 'Greece', 
                language: 'Greek', 
                region: 'europe', 
                channelId: 'UC3AqjREiiWC5xdWRXGVs0fQ',
                youtubeUrl: 'https://www.youtube.com/@ertflix/live',
                websiteUrl: 'https://www.ertflix.gr/live/'
            },
            { 
                name: 'NOS Journaal', 
                country: 'Netherlands', 
                language: 'Dutch', 
                region: 'europe', 
                channelId: 'UCqSFqKUjgPUlDd50jV_QrMQ',
                youtubeUrl: 'https://www.youtube.com/@nos/live',
                websiteUrl: 'https://nos.nl/livestream/2486528-nos-journaal-24-live'
            },
            { 
                name: 'SVT Nyheter', 
                country: 'Sweden', 
                language: 'Swedish', 
                region: 'europe', 
                channelId: 'UC8v1pCzdeyII7FEzoNPcadg',
                youtubeUrl: 'https://www.youtube.com/@svtnyheter/live',
                websiteUrl: 'https://www.svtplay.se/kanaler/svt24'
            },
            { 
                name: 'TVP Info', 
                country: 'Poland', 
                language: 'Polish', 
                region: 'europe', 
                channelId: 'UCM-3kEG1Da0FeQrbOJx-ehA',
                youtubeUrl: 'https://www.youtube.com/@tvpinfo/live',
                websiteUrl: 'https://www.tvp.pl/tvp-info'
            },
            
            // MIDDLE EAST & NORTH AFRICA
            { 
                name: 'Al Jazeera Mubasher', 
                country: 'Qatar', 
                language: 'Arabic', 
                region: 'mena', 
                channelId: 'UCfIbaUAIkT1u_JkWJdv7pKQ',
                youtubeUrl: 'https://www.youtube.com/@AlJazeeraMubasher/live',
                websiteUrl: 'https://mubasher.aljazeera.net/live'
            },
            { 
                name: 'Al Arabiya', 
                country: 'UAE/Saudi', 
                language: 'Arabic', 
                region: 'mena', 
                channelId: 'UCB9mN2Awwajnt8p2rFhAG7A',
                youtubeUrl: 'https://www.youtube.com/@AlArabiya/live',
                websiteUrl: 'https://www.alarabiya.net/live'
            },
            { 
                name: 'TRT Haber', 
                country: 'Turkey', 
                language: 'Turkish', 
                region: 'mena', 
                channelId: 'UCQhFN0kIsV0S3Qez6gEa8pQ',
                youtubeUrl: 'https://www.youtube.com/@TRTHaber/live',
                websiteUrl: 'https://www.trthaber.com/canli-yayin/'
            },
            { 
                name: 'i24NEWS Hebrew', 
                country: 'Israel', 
                language: 'Hebrew', 
                region: 'mena', 
                channelId: 'UCSyxJH2iwmRNf2N6ynW3o-A',
                youtubeUrl: 'https://www.youtube.com/@i24newshebrew/live',
                websiteUrl: 'https://www.i24news.tv/he/live'
            },
            
            // ASIA-PACIFIC
            { 
                name: 'NHK News', 
                country: 'Japan', 
                language: 'Japanese', 
                region: 'asia', 
                channelId: 'UCCzGR6XvfJGz24sliQhTjag',
                youtubeUrl: 'https://www.youtube.com/@nhk_news/live',
                websiteUrl: 'https://www3.nhk.or.jp/news/live/'
            },
            { 
                name: 'YTN', 
                country: 'South Korea', 
                language: 'Korean', 
                region: 'asia', 
                channelId: 'UChlgI3UHCOnwUGzWzbJ3H5w',
                youtubeUrl: 'https://www.youtube.com/@ytn_news/live',
                websiteUrl: 'https://www.ytn.co.kr/live'
            },
            { 
                name: 'NDTV India', 
                country: 'India', 
                language: 'Hindi/English', 
                region: 'asia', 
                channelId: 'UCZFMm1mMw0F81Z37aaEzTUA',
                youtubeUrl: 'https://www.youtube.com/@ndtv/live',
                websiteUrl: 'https://www.ndtv.com/livetv'
            },
            { 
                name: 'TVBS NEWS', 
                country: 'Taiwan', 
                language: 'Mandarin', 
                region: 'asia', 
                channelId: 'UC5nwNW4KdC0SzrhF9BXEYOQ',
                youtubeUrl: 'https://www.youtube.com/@tvbsnews/live',
                websiteUrl: 'https://news.tvbs.com.tw/live/1'
            },
            { 
                name: 'CNA', 
                country: 'Singapore', 
                language: 'English', 
                region: 'asia', 
                channelId: 'UC83jt4dlz1Gjl58fzQrrKZg',
                youtubeUrl: 'https://www.youtube.com/@channelnewsasia/live',
                websiteUrl: 'https://www.channelnewsasia.com/watch'
            },
            { 
                name: 'CGTN Chinese', 
                country: 'China', 
                language: 'Mandarin', 
                region: 'asia', 
                channelId: 'UCgrNz-aDmcr2uuto8_DL2jg',
                youtubeUrl: 'https://www.youtube.com/@CGTNOfficial/live',
                websiteUrl: 'https://www.cgtn.com/live'
            },
            
            // IRAN
            { 
                name: 'Press TV', 
                country: 'Iran', 
                language: 'Persian/English', 
                region: 'mena', 
                channelId: 'UCoza7cKEmGwc-WZpBe-1WnA',
                youtubeUrl: 'https://www.youtube.com/@presstv/live',
                websiteUrl: 'https://www.presstv.ir/live.html'
            },
            
            // SUB-SAHARAN AFRICA
            { 
                name: 'Channels TV', 
                country: 'Nigeria', 
                language: 'English', 
                region: 'africa', 
                channelId: 'UC639K3bsV-RojdsHS13kSYg',
                youtubeUrl: 'https://www.youtube.com/@channelstv/live',
                websiteUrl: 'https://www.channelstv.com/live/'
            },
            { 
                name: 'eNCA', 
                country: 'South Africa', 
                language: 'English/Afrikaans', 
                region: 'africa', 
                channelId: 'UCfvHHIU4OcJd56YgdiRIqcg',
                youtubeUrl: 'https://www.youtube.com/@enca/live',
                websiteUrl: 'https://www.enca.com/live'
            },
            
            // LATIN AMERICA
            { 
                name: 'GloboNews', 
                country: 'Brazil', 
                language: 'Portuguese', 
                region: 'latam', 
                channelId: 'UCgNG_TXKAJhXGBHMZ5uZuPA',
                youtubeUrl: 'https://www.youtube.com/@GloboNews/live',
                websiteUrl: 'https://globoplay.globo.com/globonews/ao-vivo/'
            },
            { 
                name: 'TN Todo Noticias', 
                country: 'Argentina', 
                language: 'Spanish', 
                region: 'latam', 
                channelId: 'UCj6PcyLvpnIRT_2W_mwa9Aw',
                youtubeUrl: 'https://www.youtube.com/@todonoticias/live',
                websiteUrl: 'https://tn.com.ar/vivo/'
            },
            { 
                name: 'Milenio', 
                country: 'Mexico', 
                language: 'Spanish', 
                region: 'latam', 
                channelId: 'UCFxHplbcoJK9zlrsN_vVLeQ',
                youtubeUrl: 'https://www.youtube.com/@MilenioNoticias/live',
                websiteUrl: 'https://www.milenio.com/milenio-noticias-en-vivo'
            },
            
            // NORTH AMERICA
            { 
                name: 'CBC News Network', 
                country: 'Canada', 
                language: 'English/French', 
                region: 'namerica', 
                channelId: 'UCG5r8tvNe4WPJDD3zfm5qDQ',
                youtubeUrl: 'https://www.youtube.com/@cbcnews/live',
                websiteUrl: 'https://www.cbc.ca/player/play/video/9.6253955'
            }
        ];

        let activePanel = null;
        let workingCount = 0;
        let errorCount = 0;

        function createPanel(source, index) {
            const panel = document.createElement('div');
            panel.className = 'panel';
            panel.dataset.index = index;

            panel.innerHTML = `
                <div class="panel-header">
                    <div class="panel-title">
                        <div class="channel-name">${source.name}</div>
                        <div class="channel-meta">
                            <span class="region-tag region-${source.region}">${source.region}</span>
                            <span>${source.language}</span>
                        </div>
                    </div>
                    <div class="controls">
                        <div class="unmute-indicator"></div>
                    </div>
                </div>
                <div class="video-container" id="container-${index}">
                    <iframe 
                        id="player-${index}"
                        src="https://www.youtube.com/embed/live_stream?channel=${source.channelId}&autoplay=1&mute=1&enablejsapi=1&controls=1&modestbranding=1&rel=0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                    </iframe>
                    <button class="fullscreen-btn" onclick="openFullscreen(${index})">
                        ‚õ∂ Fullscreen
                    </button>
                </div>
            `;

            // Click handler for toggling audio
            panel.querySelector('.panel-header').addEventListener('click', () => {
                if (!panel.classList.contains('error')) {
                    toggleAudio(index, source.name);
                }
            });

            // Error detection - check after a delay
            setTimeout(() => {
                checkVideoStatus(index, source);
            }, 3000);

            return panel;
        }

        function checkVideoStatus(index, source) {
            const iframe = document.getElementById(`player-${index}`);
            const container = document.getElementById(`container-${index}`);
            const panel = document.querySelector(`[data-index="${index}"]`);
            
            // Try to detect if video failed to load
            // Since we can't directly check iframe content due to cross-origin, 
            // we'll provide fallback links preemptively for better UX
            
            // For now, add a fallback option to all panels
            addFallbackLinks(container, source, index);
        }

        function addFallbackLinks(container, source, index) {
            // Add a small fallback section at the bottom
            const fallbackDiv = document.createElement('div');
            fallbackDiv.style.cssText = `
                position: absolute;
                bottom: 2.5rem;
                left: 0.5rem;
                right: 0.5rem;
                display: flex;
                gap: 0.25rem;
                z-index: 9;
            `;
            
            fallbackDiv.innerHTML = `
                <a href="${source.youtubeUrl}" target="_blank" class="fallback-link" style="flex: 1; font-size: 0.65rem; padding: 0.35rem 0.5rem;">
                    <span class="link-icon">‚ñ∂</span> YouTube
                </a>
                <a href="${source.websiteUrl}" target="_blank" class="fallback-link" style="flex: 1; font-size: 0.65rem; padding: 0.35rem 0.5rem;">
                    <span class="link-icon">üåê</span> Website
                </a>
            `;
            
            container.appendChild(fallbackDiv);
        }

        function showError(index, source) {
            const container = document.getElementById(`container-${index}`);
            const panel = document.querySelector(`[data-index="${index}"]`);
            
            panel.classList.add('error');
            errorCount++;
            updateSourceCount();
            
            container.innerHTML = `
                <div class="error-message">
                    <div class="error-icon">‚ö†</div>
                    <div class="error-text">Embed unavailable</div>
                    <div class="fallback-links">
                        <a href="${source.youtubeUrl}" target="_blank" class="fallback-link">
                            <span class="link-icon">‚ñ∂</span>
                            <span>Open on YouTube</span>
                        </a>
                        <a href="${source.websiteUrl}" target="_blank" class="fallback-link">
                            <span class="link-icon">üåê</span>
                            <span>Open on ${source.name} Website</span>
                        </a>
                    </div>
                </div>
            `;
        }

        function updateSourceCount() {
            const total = newsSources.length;
            const working = total - errorCount;
            document.getElementById('sourceCount').textContent = 
                `${working}/${total} SOURCES EMBEDDED`;
        }

        function toggleAudio(index, channelName) {
            const panels = document.querySelectorAll('.panel');
            const clickedPanel = panels[index];
            const iframe = document.getElementById(`player-${index}`);

            // If clicking the already active panel, do nothing (keep it active)
            if (activePanel === index) {
                return;
            }

            // Mute the previously active panel
            if (activePanel !== null) {
                panels[activePanel].classList.remove('active');
                const prevIframe = document.getElementById(`player-${activePanel}`);
                if (prevIframe) {
                    prevIframe.contentWindow.postMessage('{"event":"command","func":"mute","args":""}', '*');
                }
            }

            // Activate the new panel
            activePanel = index;
            clickedPanel.classList.add('active');
            if (iframe) {
                iframe.contentWindow.postMessage('{"event":"command","func":"unMute","args":""}', '*');
            }

            // Update status display
            document.getElementById('activeChannel').textContent = `ACTIVE: ${channelName}`;
        }

        function openFullscreen(index) {
            const container = document.getElementById(`container-${index}`);
            if (container.requestFullscreen) {
                container.requestFullscreen();
            } else if (container.webkitRequestFullscreen) {
                container.webkitRequestFullscreen();
            } else if (container.msRequestFullscreen) {
                container.msRequestFullscreen();
            }
        }

        // Initialize grid
        const grid = document.getElementById('newsGrid');
        newsSources.forEach((source, index) => {
            grid.appendChild(createPanel(source, index));
        });

        // Auto-activate first non-error panel on load
        setTimeout(() => {
            let firstWorking = 0;
            const panels = document.querySelectorAll('.panel');
            for (let i = 0; i < panels.length; i++) {
                if (!panels[i].classList.contains('error')) {
                    firstWorking = i;
                    break;
                }
            }
            toggleAudio(firstWorking, newsSources[firstWorking].name);
        }, 3500);
    </script>
</body>
</html>
